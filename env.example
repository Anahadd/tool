# Impressions Tool Configuration
# Copy this file to .env and fill in your values

# ===========================
# Required Configuration
# ===========================

# Apify API Token (required for Instagram scraping)
# Get your token at: https://console.apify.com/account/integrations
APIFY_TOKEN=your_apify_token_here

# YouTube API Key (required for YouTube video statistics)
# Get your key at: https://console.cloud.google.com/apis/credentials
YOUTUBE_API_KEY=your_youtube_api_key_here

# ===========================
# Firebase Configuration
# ===========================

# Firebase Service Account (for backend)
# This is the JSON key file content from Firebase Console > Project Settings > Service Accounts
# You can either:
#   1. Set this to the JSON string (minified)
#   2. Set this to the path of the JSON file
# FIREBASE_SERVICE_ACCOUNT=path/to/serviceAccountKey.json
# OR
# FIREBASE_SERVICE_ACCOUNT={"type":"service_account","project_id":"..."}

# Firebase Storage Bucket
# Found in Firebase Console > Storage
# Format: your-project-id.appspot.com
# FIREBASE_STORAGE_BUCKET=your-project-id.appspot.com

# ===========================
# Production Security (Recommended)
# ===========================

# CORS Allowed Origins (comma-separated)
# Default: * (allow all - not recommended for production)
# Example: ALLOWED_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
# ALLOWED_ORIGINS=*

# Base URL for OAuth redirects (REQUIRED for Google Sheets authentication in production)
# Set this to your deployed app URL
# Example: BASE_URL=https://your-app.railway.app
# BASE_URL=http://localhost:8000

# Server Configuration
# HOST=0.0.0.0
# PORT=8000
# LOG_LEVEL=info

# ===========================
# Google Sheets Configuration
# ===========================

# Option 1: Service Account (recommended for automation)
# Path to your Google service account JSON file
# GOOGLE_SHEETS_CREDS=/path/to/service_account.json

# Option 2: OAuth (interactive login)
# Run 'impressions connect-sheets' first, then set defaults

# Spreadsheet URL or ID (can be set via CLI with 'set-defaults')
# GOOGLE_SHEETS_SPREADSHEET=https://docs.google.com/spreadsheets/d/YOUR_SHEET_ID/edit

# Worksheet/tab name (default: Sheet1)
# GOOGLE_SHEETS_WORKSHEET=Sheet1

# Allow opening by title (requires Drive API enabled)
# GOOGLE_SHEETS_ALLOW_TITLE=True

# ===========================
# Rate Limit Configuration
# ===========================

# TikTok Settings
# Adjust these if you're hitting TikTok rate limits or getting CaptchaException errors
TIKTOK_BATCH_SIZE=20          # URLs per batch (default: 20, reduce to 10 or 5 if hitting limits)
TIKTOK_BATCH_DELAY=1.0        # Seconds between batches (default: 1.0, increase to 2.0-3.0 if needed)
# PLAYWRIGHT_TIMEOUT=60000     # Browser launch timeout in ms (default: 60000 = 60 seconds)
#                              # Increase to 90000-120000 if getting "Timeout exceeded" errors in production

# Instagram/Apify Settings  
# Adjust these if you're hitting Apify rate limits
INSTAGRAM_BATCH_SIZE=50       # URLs per batch (default: 50, reduce to 25 if hitting limits)
INSTAGRAM_BATCH_DELAY=2.0     # Seconds between batches (default: 2.0, increase to 3.0-5.0 if needed)

# ===========================
# Optional Advanced Settings
# ===========================

# TikTok ms_token (improves reliability, optional)
# Extract from browser cookies when logged into TikTok
# ms_token=your_ms_token_here

# Browser for TikTok scraping (default: chromium)
# Options: chromium, firefox, webkit
# TIKTOK_BROWSER=chromium

# Apify Actor ID for Instagram scraping (default provided)
# APIFY_ACTOR_ID=shu8hvrXbJbY3Eb9W

# OAuth client file path (default: ~/.tool_google/oauth_client.json)
# GOOGLE_OAUTH_CLIENT=/path/to/oauth_client.json

# OAuth token file path (default: ~/.tool_google/token.json)
# GOOGLE_OAUTH_TOKEN=/path/to/token.json

# Config directory (default: ~/.tool_google)
# TOOL_CONFIG_DIR=/path/to/config/dir

# ===========================
# Recommended Settings by Volume
# ===========================

# Small volume (<50 URLs): Use defaults above

# Medium volume (50-200 URLs):
# TIKTOK_BATCH_SIZE=15
# INSTAGRAM_BATCH_SIZE=30

# Large volume (200+ URLs):
# TIKTOK_BATCH_SIZE=10
# INSTAGRAM_BATCH_SIZE=20
# TIKTOK_BATCH_DELAY=2.0
# INSTAGRAM_BATCH_DELAY=3.0

# Very large volume (500+ URLs) or frequent updates:
# TIKTOK_BATCH_SIZE=5
# INSTAGRAM_BATCH_SIZE=15
# TIKTOK_BATCH_DELAY=3.0
# INSTAGRAM_BATCH_DELAY=5.0
# Consider upgrading to paid API tiers

# ===========================
# Notes
# ===========================

# 1. Never commit .env file to version control (already in .gitignore)
# 2. See RATE_LIMITS.md for detailed rate limit management guide
# 3. See SECURITY.md for security best practices
# 4. Test with small batches first before processing many URLs

TWITTER_BEARER_TOKEN="AAAAAAAAAAAAAAAAAAAAAAgc5AEAAAAAA1yYftdG8ewEfXuOlcwMVDTh%2FCY%3DBExbaIRquRGOQrD0qTknRNDdvj1LUAE5hCKWcDGNWg2Bf6KODF"
